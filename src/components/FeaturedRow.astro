---
import tools from '../data/tools.json';

// Configuration for your tiers
const TIERS = [
    { name: 'Platinum', price: '$89', color: '#e5e4e2', border: 'linear-gradient(45deg, #e5e4e2, #ffffff, #e5e4e2)' },
    { name: 'Gold', price: '$69', color: '#ffd700', border: 'linear-gradient(45deg, #ffd700, #fff2cc, #ffd700)' },
    { name: 'Silver', price: '$59', color: '#c0c0c0', border: 'linear-gradient(45deg, #c0c0c0, #f5f5f5, #c0c0c0)' }
];

// Helper to find a real tool for a specific tier
function getSponsoredTool(tierName) {
    return tools.find(t => t.sponsorship === tierName);
}
---

<div class="featured-grid">
    {TIERS.map((tier) => {
        const activeTool = getSponsoredTool(tier.name);
        
        return (
            <div class={`featured-card ${tier.name.toLowerCase()}`} style={`--theme-color: ${tier.color}`}>
                
                {/* BADGE */}
                <div class="tier-badge">{tier.name} Spot</div>

                {activeTool ? (
                    /* STATE A: ACTIVE PAID LISTING */
                    <a href={`/tools/${activeTool.id}`} class="content-wrapper">
                        <img src={activeTool.image} alt={activeTool.name} class="featured-logo" />
                        <div>
                            <h3 class="tool-name">{activeTool.name}</h3>
                            <p class="tool-desc">{activeTool.description.substring(0, 60)}...</p>
                        </div>
                        <span class="cta-btn">Visit Tool &rarr;</span>
                    </a>
                ) : (
                    /* STATE B: EMPTY "ADVERTISE HERE" SLOT */
                    <a href="mailto:bhadsuresh@gmail.com?subject=I want the ${tier.name} spot" class="advertise-wrapper">
                        <div class="dashed-box">
                            <span class="plus-icon">+</span>
                            <h3>Advertise Your Tool</h3>
                            <p class="price-tag">{tier.price} <span class="period">/mo</span></p>
                            <span class="book-btn">Book {tier.name}</span>
                        </div>
                    </a>
                )}
            </div>
        );
    })}
</div>

<style>
    .featured-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 1.5rem;
        margin-bottom: 1rem;
    }

    .featured-card {
        position: relative;
        background: white;
        border-radius: 12px;
        padding: 4px; /* Space for the gradient border */
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        transition: transform 0.2s;
        display: flex;
        flex-direction: column;
    }

    .featured-card:hover { transform: translateY(-5px); }

    /* The Shiny Borders */
    .platinum { background: linear-gradient(135deg, #e5e4e2 0%, #ffffff 50%, #9a9a9a 100%); }
    .gold { background: linear-gradient(135deg, #ffd700 0%, #fff2cc 50%, #d4af37 100%); }
    .silver { background: linear-gradient(135deg, #c0c0c0 0%, #f5f5f5 50%, #808080 100%); }

    /* The Badge at top */
    .tier-badge {
        position: absolute;
        top: -12px;
        left: 50%;
        transform: translateX(-50%);
        background: #0f172a;
        color: white;
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 0.75rem;
        font-weight: 800;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        z-index: 10;
        box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }

    /* Inner Content Containers */
    .content-wrapper, .advertise-wrapper {
        background: white;
        border-radius: 9px;
        padding: 1.5rem;
        height: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        text-decoration: none;
        color: inherit;
    }

    /* STATE A Styles */
    .featured-logo { width: 95px; height: 95x; object-fit: contain; margin-bottom: 20px;}
    .tool-name { margin: 0; font-size: 1.25rem; font-weight: 700; color: #1e293b; }
    .tool-desc { font-size: 0.875rem; color: #64748b; margin: 0.5rem 0 1rem 0; line-height: 1.4; }
    .cta-btn { 
        margin-top: auto; 
        background: #f1f5f9; 
        color: #334155; 
        padding: 8px 16px; 
        border-radius: 6px; 
        font-weight: 600; 
        font-size: 0.875rem; 
    }

    /* STATE B (Advertise) Styles */
    .dashed-box {
        width: 100%;
        height: 100%;
        border: 2px dashed #cbd5e1;
        border-radius: 8px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 1rem;
    }
    .plus-icon { font-size: 2rem; color: #cbd5e1; margin-bottom: 0.5rem; }
    .advertise-wrapper h3 { margin: 0; font-size: 1.1rem; color: #64748b; }
    .price-tag { font-size: 1.5rem; font-weight: 800; color: #0f172a; margin: 0.5rem 0; }
    .period { font-size: 0.9rem; font-weight: 400; color: #94a3b8; }
    .book-btn {
        margin-top: 0.5rem;
        background: #0f172a;
        color: white;
        padding: 8px 20px;
        border-radius: 6px;
        font-size: 0.875rem;
        font-weight: 600;
        transition: background 0.2s;
    }
    .advertise-wrapper:hover .book-btn { background: #2563eb; }
</style>